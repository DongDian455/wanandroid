## 开发过程中遇到的坑

Room 数据库默认是开子线程中操作数据库的，需要调用**allowMainThreadQueries**方法才能在主线程操作。如果需要数据实时同步的，操作的数据量不大，建议开启允许主线程操作数据库。

```java
private static AppDatabase buildDatabase(Context context) {
        return Room.databaseBuilder(context, AppDatabase.class, DATABASE_NAME)
                .allowMainThreadQueries()
                .build();
    }
```



如果查询返回的对象是LiveData，就算调用allowMainThreadQueries()方法，还是会走子线程：

```java
@Query("SELECT * FROM tb")
LiveData<List<T>> getAllArticle();
```
